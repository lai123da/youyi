document.addEventListener("DOMContentLoaded",(()=>{const e=document.getElementById("searchInput"),t=document.getElementById("cancelBtn"),n=document.getElementById("historyTags"),o=document.getElementById("hotTags"),c=document.getElementById("editHistoryBtn"),s=(document.getElementById("doneEditingBtn"),document.querySelector(".history-section").querySelector(".section-header"));let i=JSON.parse(localStorage.getItem("searchHistory"))||[];function a(){n.innerHTML="",0===i.length?(n.innerHTML="<p>暂无历史搜索记录</p>",s.style.display="none"):(s.style.display="flex",i.forEach(((t,o)=>{const c=document.createElement("span");c.classList.add("tag"),c.textContent=t;const s=document.createElement("i");s.classList.add("iconfont","icon-delete-icon"),s.addEventListener("click",(e=>{e.stopPropagation(),function(e){i.splice(e,1),localStorage.setItem("searchHistory",JSON.stringify(i)),a()}(o)})),c.appendChild(s),c.addEventListener("click",(()=>{e.value=t,console.log("搜索历史:",t)})),n.appendChild(c)})))}function l(e){e&&!i.includes(e)&&(i.unshift(e),i.length>10&&i.pop(),localStorage.setItem("searchHistory",JSON.stringify(i)),a())}e.addEventListener("keypress",(t=>{if("Enter"===t.key){const t=e.value.trim();t&&(l(t),console.log("执行搜索:",t))}})),t.addEventListener("click",(()=>{e.value=""})),c.addEventListener("click",(function(){i=[],localStorage.setItem("searchHistory",JSON.stringify(i)),a()})),o.addEventListener("click",(t=>{if(t.target.classList.contains("tag")){const n=t.target.textContent.trim();e.value=n,l(n),console.log("搜索热门:",n)}})),a()}));